<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Overview</title>

    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">

    <script src="https://kit.fontawesome.com/5b081e2bb9.js" crossorigin="anonymous"></script>

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-dark sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fa-solid fa-forward-fast"></i>
                    <!-- <i class="fas fa-laugh-wink"></i> -->
                </div>
                <div class="sidebar-brand-text mx-3">
                ECE 4760
                <br>
                FALL 22
                </div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="fa-solid fa-house"></i>
                    <!-- <i class="fas fa-fw fa-tachometer-alt"></i> -->
                    <span>Main</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                Report
            </div>

            <!-- Nav Item - Pages Collapse Menu -->
            <li class="nav-item">
                <a class="nav-link" href="#" data-toggle="collapse" data-target="#collapsePages"
                    aria-expanded="true" aria-controls="collapsePages">
                    <i class="fa-regular fa-folder"></i>
                    <!-- <i class="fas fa-fw fa-folder"></i> -->
                    <span>Sections</span>
                </a>
                <div id="collapsePages" class="collapse show" aria-labelledby="headingPages" data-parent="#accordionSidebar">
                    <div class="bg-light py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Project:</h6>
                        <a class="collapse-item" href="overview.html">High-Level Overview</a>
                        <a class="collapse-item" href="design.html">Design</a>
                        <a class="collapse-item" href="results.html">Results</a>
                        <a class="collapse-item" href="conclusions.html">Conclusions</a>
                        <div class="collapse-divider"></div>
                        <h6 class="collapse-header">Appendices:</h6>
                        <a class="collapse-item" href="permissions.html">Permissions</a>
                        <a class="collapse-item" href="code.html">Code</a>
                        <a class="collapse-item" href="misc.html">Miscellaneous</a>
                    </div>
                </div>
            </li>

            <!-- Sidebar Message -->
            <div class="sidebar-card d-none d-lg-flex">
                <p class="text-center mb-0">
                tc575 rm722 raf269
                </p>
            </div>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>

        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                <br>
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                    <h1 class="h3 mb-0 text-gray-800">Overview</h1>
                    </div>

                    <div class="row">

                        <!-- Area Chart -->
                        <!-- col-xl-(1-12) is width -->
                        <!-- col-lg-(1-12) also width (just different sizes)-->
                        <!-- should all add up to 12 across columns -->
                        <div class="col-xl-6 col-lg-7">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Inspiration</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body mb-2"><p>We chose this project as an exploration into the field of digital-signal processing. Initially, we expected this would be a software-heavy, hardware-light project. This was preferred over something more hardware-involved. It ended up being an everything-heavy project, but we learned a lot.</p>
<p>Modern synths can be found in a variety of different forms, such as purely software ones as well as analog / modular ones. To keep our project well-balanced in terms of hardware and software components, we chose to add hardware input / output on top of the digital sound synthesis.</p>
<p>When looking at how we wanted to create the hardware interface, we turned to audio synthesizers from Moog in the late 20th century with their array of knobs and buttons to see how we could organize our interface.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Pie Chart -->
                        <div class="col-xl-6 col-lg-5">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Structure</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body mb-2">
                                    Our project was split into two main parts: the audio synthesis / FFT component and the hardware interfacing component. This allowed for both parts to be worked on concurrently by predefining a set list of variables that the audio side would need to access from the hardware interfacing side to take in inputs. We also separated the code into logical sections—keeping the FFT with FFT, rotary encoder with rotary encoder, etc.—which made it easier to debug and keep track of where things were in our large, single file.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <!-- Pie Chart -->
                        <div class="col-xl-5 col-lg-4">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Patents, Copyrights, Trademarks</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body mb-2">
                                    <p>The commercial synths on the market are more robust and usually will have more features than what we have here but reverse engineering the basic components of one was a fruitful learning experience. We don’t see any copyright or trademark infringements due to this project as we did not reference commercial code or inspect outside hardware and instead opted to work off the basic ideas all synths use.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Pie Chart -->
                        <div class="col-xl-7 col-lg-6">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Tradeoffs</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body mb-2">
                                    <p>To keep the workload contained to a reasonable amount for a month-long project, we chose to limit features to the basic components one would find in a synth. Our sound design has 4 main features: waveshapes, in-place FFT filtering, LFO, and ADSR envelopes. We decided to implement in-place FFT filtering as opposed to building a circuit for filtering. This allowed us to maximize the space available on our breadboard for user-interactive hardware.</p>
                                    <p>Physical hardware aspects of our project required:
                                    - Four buttons (TFT menu selection)
                                    <br>
                                    - One potentiometer slider (adjusting variables)
                                    <br>
                                    - One rotary encoder (selecting variables to be adjusted)
                                    <br>
                                    - Twelve piano “keys” connected via wires to a capacitive touch sensor module
                                    <br>
                                </p>
                                    <p>
                                    We had initially considered including leds to display amplitude levels and using two oscillators. However, we did not have enough GPIO pins left by the end of the project to include the leds. We compromised on one oscillator rather than one on each core to save us time, hardware space, and code.</p>
                                    <p>Direct digital synthesis is only one of many methods of audio synthesis. A quick list of other approaches can be found <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/Audio/synth.html">here</a>.
                                    </p>
                                    </div>
                            </div>
                        </div>

                    </div>

                    <!-- Content Row -->
                    <div class="row">
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Background</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body mb-2">
                                    <h5>Fixed Point Arithmetic (Fix15)</h5>
                                    <p>Almost all of the calculations done in this project use fixed-point arithmetic. This allowed for faster calculations without doing them using floating point numbers. Specifically, we used a fixed point between the 14th and 15th bit of a signed int (fix15 in the code).
                                    A more thorough explanation on this is <a href="https://vanhunteradams.com/FixedPoint/FixedPoint.html">here</a>.
                                    </p>

                                    <h5>Direct Digital Synthesis (DDS)</h5>
                                    <p>We used direct digital synthesis to produce four different wave shapes: sinusoidal, square, triangle, and sawtooth. The provided sinusoidal wavetable from Lab 1 was used as a model for how to generate the other waveforms.
                                    <br>
                                    Four wavetables, one for each waveform, were created, all initialized to be the same length.
                                    A for-loop iterates through each index of the wavetables. At every index, amplitude values, which are calculated as functions of the index, are assigned to each wavetable.
                                    The wavetables are populated at once by iterating through the for-loop.
                                    Each array constitutes one period of the waveform.
                                    <br>
                                    The maximum possible waveform amplitude (before overflow errors occur) was used. This was a default setting for the sinusoidal waveform that we used for the others.
                                    Note that the generated waveforms are shifted so that their maximum and minimum values lie at or above 0. Generated waveforms needed to be non-negative in order to avoid output errors, and to be audible.
                                    <br>
                                    Output code samples from the wavetables using an incrementer and outputs these values to the DAC, generating the desired wave shape in sound.
                                    </p>

                                    <h5>Fast Fourier Transform (FFT)</h5>
                                    <p>Every signal (in the time-domain) has a frequency-domain counterpart. Essentially, any complex signal, no matter how weirdly-shaped, can be decomposed into a sum of multiple sinusoidal waves at different frequencies. A fourier transform takes as input a time-domain signal, and outputs the frequencies of the sinusoids that make it up to the frequency-domain. Frequencies that have a larger “effect” on the time-domain signal than others are expressed by large amplitudes in the frequency-domain.
                                    <br>
                                    Applying the FFT on our wavetables allows us to modify the intensity of frequencies of that wave, effectively allowing us to filter them.</p>

                                    <h5>Inverse FFT</h5>
                                    <p>
                                    After modifying the frequency domain output of the FFT, we needed to convert that back to the time domain in order for it to be output through the DAC. To do this, we sent the modified FFT output into an inverse FFT (iFFT) function.
                                    <br>
                                    The output of the iFFT needed some amplitude scaling before we could use it as our new, filtered wavetable. Using serial output to compare the waveform before and after FFT followed by iFFT was performed, we determined that the waveform needs to be scaled up by a factor of four after iFFT is performed.
                                    <br>
                                    More info on FFTs can be found <a href="https://learn.adafruit.com/fft-fun-with-fourier-transforms/background">here</a>.
                                    </p>

                                    <h5>Filtering</h5>
                                    <p>In-between FFT and iFFT, we perform frequency-domain filtering. Three filters were implemented: low-pass, high-pass, and band-pass.
                                    <br>
                                    - A low-pass filter only “passes” low frequencies (below a cutoff frequency) that compose a time-domain signal, and “blocks” all other frequencies.
                                    <br>
                                    - A high-pass filter only “passes” high frequencies (above a cutoff frequency) that compose a time-domain signal.
                                    <br>
                                    - A band-pass filter only “passes” frequencies within a middle range (between two cutoff frequencies) that compose a time-domain signal.
                                    <br>
                                    FFT bins within our desired frequency range were left alone, while FFT bins outside of it were either zeroed-out or reduced by a factor of 2 (if they were on the edge of the cutoff frequency).
                                    <br>
                                    The effect of filtering changes the shape of the time-domain signal. Filtered audio signals sound different than their unfiltered counterparts. Low-passed signals sound “softer”, high-passed signals sound “sharper”, and band-passed signals are somewhere in-between. User input is taken to determine what kind of filter—if any—is to be implemented, and what its cutoff frequency is.
                                    </p>

                                    <h5>Low Frequency Oscillator (LFO)</h5>
                                    <p>A low-frequency oscillator (LFO) signal is used to modulate the cutoff frequencies of the filters. The effect is that the frequency of the output changes in time as its cutoff frequencies grow and decay with the LFO. LFO can only be applied if filtering is applied, otherwise there is no effect.
                                    <br>
                                    LFO wavetables (sine, square, triangle, and sawtooth) were populated in the same for-loop along with the sound wavetables. When LFO is activated, the cutoff frequencies are calculated in real-time by multiplying their base (user input) value by an intermittently sampled LFO wavetable. Thus, the cutoff frequencies change with time according to the selected LFO waveshape.
                                    </p>

                                    <h5>Envelopes (ADSR)</h5>
                                    <p>Each time a user touches a key, and the associated note frequency is selected, ADSR (Attack-Decay-Sustain-Release) is applied. An attack parameter is applied immediately to the amplitude of the output note: this quickly increases the amplitude to a peak. Once the output amplitude reaches a desired peak “attack” is over, and “decay” begins: the amplitude of the output quickly decreases to a desired level. Following “decay”, the output amplitude is “sustained” so long as the user continues touching the same key. After the user releases the selected key, “release” is used to slowly decrement the output amplitude of the note until it reaches zero (i.e. no longer played). ADSR is implemented using checking which key is “selected” by the user and applying a series of amplitude increments on its amplitude.
                                    </p>

                                    <h5>Thin Film Transistor Display (TFT)</h5>
                                    <p>The TFT was used to display sound parameters so the user would have an indication of what they were changing and what value they were setting it to. Functions were written to write to the TFT and later linked up with their respective variables. This allowed for decoupling during the coding process. The TFT library used came from a previous student’s project. The link to it is <a href="https://parthssharma.github.io/Pico/TFTLibrary.html">here</a>.
                                    </p>

                                    <h5>Capcitive Touch</h5>
                                    <p>The capacitive touch library used can be found <a href="https://github.com/antgon/pico-mpr121">here</a>. The sample code was modified for our uses. This was done by increasing the number of activated sensors to all 12, and placing all their needed parameters into an array.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Last Updated Dec 2022</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

</body>

</html>
