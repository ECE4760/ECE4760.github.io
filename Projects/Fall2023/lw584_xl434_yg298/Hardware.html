<!DOCTYPE html>
<!-- saved from url=(0045)https://xl434.github.io/ece4760_web/hardware/ -->
<html lang="en-US" class="js">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">




  <title>Hardware</title>
  <meta name="description" content="">
  <style type="text/css">
    svg:not(:root).svg-inline--fa {
      overflow: visible
    }

    .svg-inline--fa {
      display: inline-block;
      font-size: inherit;
      height: 1em;
      overflow: visible;
      vertical-align: -.125em
    }

    .svg-inline--fa.fa-lg {
      vertical-align: -.225em
    }

    .svg-inline--fa.fa-w-1 {
      width: .0625em
    }

    .svg-inline--fa.fa-w-2 {
      width: .125em
    }

    .svg-inline--fa.fa-w-3 {
      width: .1875em
    }

    .svg-inline--fa.fa-w-4 {
      width: .25em
    }

    .svg-inline--fa.fa-w-5 {
      width: .3125em
    }

    .svg-inline--fa.fa-w-6 {
      width: .375em
    }

    .svg-inline--fa.fa-w-7 {
      width: .4375em
    }

    .svg-inline--fa.fa-w-8 {
      width: .5em
    }

    .svg-inline--fa.fa-w-9 {
      width: .5625em
    }

    .svg-inline--fa.fa-w-10 {
      width: .625em
    }

    .svg-inline--fa.fa-w-11 {
      width: .6875em
    }

    .svg-inline--fa.fa-w-12 {
      width: .75em
    }

    .svg-inline--fa.fa-w-13 {
      width: .8125em
    }

    .svg-inline--fa.fa-w-14 {
      width: .875em
    }

    .svg-inline--fa.fa-w-15 {
      width: .9375em
    }

    .svg-inline--fa.fa-w-16 {
      width: 1em
    }

    .svg-inline--fa.fa-w-17 {
      width: 1.0625em
    }

    .svg-inline--fa.fa-w-18 {
      width: 1.125em
    }

    .svg-inline--fa.fa-w-19 {
      width: 1.1875em
    }

    .svg-inline--fa.fa-w-20 {
      width: 1.25em
    }

    .svg-inline--fa.fa-pull-left {
      margin-right: .3em;
      width: auto
    }

    .svg-inline--fa.fa-pull-right {
      margin-left: .3em;
      width: auto
    }

    .svg-inline--fa.fa-border {
      height: 1.5em
    }

    .svg-inline--fa.fa-li {
      width: 2em
    }

    .svg-inline--fa.fa-fw {
      width: 1.25em
    }

    .fa-layers svg.svg-inline--fa {
      bottom: 0;
      left: 0;
      margin: auto;
      position: absolute;
      right: 0;
      top: 0
    }

    .fa-layers {
      display: inline-block;
      height: 1em;
      position: relative;
      text-align: center;
      vertical-align: -.125em;
      width: 1em
    }

    .fa-layers svg.svg-inline--fa {
      -webkit-transform-origin: center center;
      transform-origin: center center
    }

    .fa-layers-counter,
    .fa-layers-text {
      display: inline-block;
      position: absolute;
      text-align: center
    }

    .fa-layers-text {
      left: 50%;
      top: 50%;
      -webkit-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
      -webkit-transform-origin: center center;
      transform-origin: center center
    }

    .fa-layers-counter {
      background-color: #ff253a;
      border-radius: 1em;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
      color: #fff;
      height: 1.5em;
      line-height: 1;
      max-width: 5em;
      min-width: 1.5em;
      overflow: hidden;
      padding: .25em;
      right: 0;
      text-overflow: ellipsis;
      top: 0;
      -webkit-transform: scale(.25);
      transform: scale(.25);
      -webkit-transform-origin: top right;
      transform-origin: top right
    }

    .fa-layers-bottom-right {
      bottom: 0;
      right: 0;
      top: auto;
      -webkit-transform: scale(.25);
      transform: scale(.25);
      -webkit-transform-origin: bottom right;
      transform-origin: bottom right
    }

    .fa-layers-bottom-left {
      bottom: 0;
      left: 0;
      right: auto;
      top: auto;
      -webkit-transform: scale(.25);
      transform: scale(.25);
      -webkit-transform-origin: bottom left;
      transform-origin: bottom left
    }

    .fa-layers-top-right {
      right: 0;
      top: 0;
      -webkit-transform: scale(.25);
      transform: scale(.25);
      -webkit-transform-origin: top right;
      transform-origin: top right
    }

    .fa-layers-top-left {
      left: 0;
      right: auto;
      top: 0;
      -webkit-transform: scale(.25);
      transform: scale(.25);
      -webkit-transform-origin: top left;
      transform-origin: top left
    }

    .fa-lg {
      font-size: 1.33333em;
      line-height: .75em;
      vertical-align: -.0667em
    }

    .fa-xs {
      font-size: .75em
    }

    .fa-sm {
      font-size: .875em
    }

    .fa-1x {
      font-size: 1em
    }

    .fa-2x {
      font-size: 2em
    }

    .fa-3x {
      font-size: 3em
    }

    .fa-4x {
      font-size: 4em
    }

    .fa-5x {
      font-size: 5em
    }

    .fa-6x {
      font-size: 6em
    }

    .fa-7x {
      font-size: 7em
    }

    .fa-8x {
      font-size: 8em
    }

    .fa-9x {
      font-size: 9em
    }

    .fa-10x {
      font-size: 10em
    }

    .fa-fw {
      text-align: center;
      width: 1.25em
    }

    .fa-ul {
      list-style-type: none;
      margin-left: 2.5em;
      padding-left: 0
    }

    .fa-ul>li {
      position: relative
    }

    .fa-li {
      left: -2em;
      position: absolute;
      text-align: center;
      width: 2em;
      line-height: inherit
    }

    .fa-border {
      border: solid .08em #eee;
      border-radius: .1em;
      padding: .2em .25em .15em
    }

    .fa-pull-left {
      float: left
    }

    .fa-pull-right {
      float: right
    }

    .fa.fa-pull-left,
    .fab.fa-pull-left,
    .fal.fa-pull-left,
    .far.fa-pull-left,
    .fas.fa-pull-left {
      margin-right: .3em
    }

    .fa.fa-pull-right,
    .fab.fa-pull-right,
    .fal.fa-pull-right,
    .far.fa-pull-right,
    .fas.fa-pull-right {
      margin-left: .3em
    }

    .fa-spin {
      -webkit-animation: fa-spin 2s infinite linear;
      animation: fa-spin 2s infinite linear
    }

    .fa-pulse {
      -webkit-animation: fa-spin 1s infinite steps(8);
      animation: fa-spin 1s infinite steps(8)
    }

    @-webkit-keyframes fa-spin {
      0% {
        -webkit-transform: rotate(0);
        transform: rotate(0)
      }

      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg)
      }
    }

    @keyframes fa-spin {
      0% {
        -webkit-transform: rotate(0);
        transform: rotate(0)
      }

      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg)
      }
    }

    .fa-rotate-90 {
      -webkit-transform: rotate(90deg);
      transform: rotate(90deg)
    }

    .fa-rotate-180 {
      -webkit-transform: rotate(180deg);
      transform: rotate(180deg)
    }

    .fa-rotate-270 {
      -webkit-transform: rotate(270deg);
      transform: rotate(270deg)
    }

    .fa-flip-horizontal {
      -webkit-transform: scale(-1, 1);
      transform: scale(-1, 1)
    }

    .fa-flip-vertical {
      -webkit-transform: scale(1, -1);
      transform: scale(1, -1)
    }

    .fa-flip-horizontal.fa-flip-vertical {
      -webkit-transform: scale(-1, -1);
      transform: scale(-1, -1)
    }

    :root .fa-flip-horizontal,
    :root .fa-flip-vertical,
    :root .fa-rotate-180,
    :root .fa-rotate-270,
    :root .fa-rotate-90 {
      -webkit-filter: none;
      filter: none
    }

    .fa-stack {
      display: inline-block;
      height: 2em;
      position: relative;
      width: 2em
    }

    .fa-stack-1x,
    .fa-stack-2x {
      bottom: 0;
      left: 0;
      margin: auto;
      position: absolute;
      right: 0;
      top: 0
    }

    .svg-inline--fa.fa-stack-1x {
      height: 1em;
      width: 1em
    }

    .svg-inline--fa.fa-stack-2x {
      height: 2em;
      width: 2em
    }

    .fa-inverse {
      color: #fff
    }

    .sr-only {
      border: 0;
      clip: rect(0, 0, 0, 0);
      height: 1px;
      margin: -1px;
      overflow: hidden;
      padding: 0;
      position: absolute;
      width: 1px
    }

    .sr-only-focusable:active,
    .sr-only-focusable:focus {
      clip: auto;
      height: auto;
      margin: 0;
      overflow: visible;
      position: static;
      width: auto
    }
  </style>
  <link rel="canonical" href="https://xl434.github.io/ece4760_web/hardware/">


  <script>
    /* Cut the mustard */
    if ('querySelector' in document && 'addEventListener' in window) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="./Hardware_files/main.css">
  <link rel="stylesheet" href="./Hardware_files/default.css">
  <!-- start custom head snippets -->

  <!-- insert favicons. use http://realfavicongenerator.net/ -->

  <!-- end custom head snippets -->

</head>


<body class="layout--page  hardware" data-new-gr-c-s-check-loaded="14.1146.0" data-gr-ext-installed="">
  <nav class="skip-links">
    <h2 class="screen-reader-text">Skip links</h2>
    <ul>
      <li><a href="https://xl434.github.io/ece4760_web/hardware/#primary-nav" class="screen-reader-shortcut">Skip to
          primary navigation</a></li>
      <li><a href="https://xl434.github.io/ece4760_web/hardware/#main" class="screen-reader-shortcut">Skip to
          content</a></li>
      <li><a href="https://xl434.github.io/ece4760_web/hardware/#footer" class="screen-reader-shortcut">Skip to
          footer</a></li>
    </ul>
  </nav>


  <div class="navigation-wrapper">
    <a href="https://xl434.github.io/ece4760_web/hardware/#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul>
        <li><a href="./index.html">Intro</a></li>
        <li><a href="./High Level Design.html">High Level</a></li>
        <li><a href="./Hardware.html">Hardware</a></li>
        <li><a href="./Software Design.html">Software</a></li>
        <li><a href="./Conclusion.html">Conclusion</a></li>
      </ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


  <header class="masthead">
    <div class="wrap">

      <a href="https://xl434.github.io/ece4760_web/" class="site-logo" rel="home" title="ECE 4760 Final Project">
        <img src="./Hardware_files/logo.png" class="site-logo-img animated fadeInDown" alt="ECE 4760 Final Project">
      </a>




      <div class="site-title animated fadeIn"><a href="https://xl434.github.io/ece4760_web/">ECE 4760 Final Project</a>
      </div>

      <p class="site-description animated fadeIn" itemprop="description"></p>

    </div>
  </header><!-- /.masthead -->


  <main id="main" class="main-content" aria-label="Content">
    <article>


      <div class="page-wrapper">
        <header class="page-header">


          <h1 id="page-title" class="page-title">Hardware</h1>

        </header>
        <div class="page-content">
          <h2 id="programhardware-design"><strong>Program/hardware design</strong></h2>
          <h3 id="hardware">hardware</h3>
          <h4 id="schematics-and-wiring">Schematics and wiring</h4>
          <figure style="width: 500px" class="align-center">
            <img src="./Hardware_files/image15.png" alt="">
          </figure>

          <h4 id="amplifier-circuit">Amplifier circuit</h4>
          <figure style="width: 500px" class="align-center">
            <img src="./Hardware_files/image14.png" alt="">
          </figure>

          <p>This circuit takes in the guitar input and passes it through a 0.1u decoupling capacitor. This capacitor
            will block any DC component of the signal and only allow AC signal to pass through, helping us to eliminate
            DC noise. Then R1 and R2 form a voltage divider to bias the op-amp and increase the signal’s value. These
            three components also form a high pass filter which has the following cut-off frequency:
            fcutoff=12RC=12<em>*33.33k</em>0.1u=47.772Hz
            We know that common guitars usually produce effective sounds frequency from 75 to 5k Hz, so this cutoff
            frequency helps as eliminate low frequencies noise.
            The op-amp circuit has a gain of 1+R3/R4=4 and amplifies the guitar input to have a greater pk-to-pk. The
            non-inverting input at pin 3 receives the guitar signal, while the inverting input at pin 2 is connected to
            the output at pin 1 through a feedback loop, which sets the gain of the amplifier. The feedback capacitor C2
            helps roll off high-frequencies. The op-amp output is connected to another decoupling capacitor C1 to help
            us further ensure there’s no DC noise. Then passed through a set of R5 and R6 which is to bias the output to
            be a little smaller since we don’t want to break the GPIO.
            To safely protect our GPIO from overvoltage, we added a Schottky diode in parallel with our Pico ADC. The
            diode will be turned on when the voltage is over 3.3V or lower than 0V, passing the overvoltage or
            reversed-voltage current directly to GND. When the voltage is smaller than 3.3 V but greater than 0, the
            diode is opened, so all the current can reach ADC.</p>

          <h4 id="pico-adc">Pico ADC</h4>
          <p>We used the on-board ADC at GPIO 26 which receives the output of the amplifier and it’s a 12-bit ADC with
            lower section 3 bits being noise so we right-shift 3 to eliminate those and left-shift before passing it to
            DAC.</p>

          <h4 id="external-dac-spi">External DAC (SPI)</h4>
          <p>We used the MCP4822 DAC with two independent DACs, each with a 12-bit resolution. The 12-bit input values
            for the DACs are written to the Pico via SPI interface (SDI, SCK, /CS) and clocked into the input register.
            Its output amplifier circuitry allows voltages down to 0V to operate with low output impedance for driving
            external loads. Output is then connected to the audio jack and connected to the speaker set.</p>

          <h4 id="fram-spi">FRAM (SPI)</h4>
          <p>We learned abut FRAM and our memory restriction from Bruce. Pico’s RAM is around 260 KB with a 2MB flash
            program memory. This is enough for digital synthesized sounds, but not for audio recordings’ saving and
            replaying. Therefore, we look into using the nonvolatile FRAM that’s byte-addressable. Though it’s smaller
            than SD card, it’s enough for us to store small audio samples, enabling fast read/write of data. According
            to Bruce, we used MB85RS4MT which is a “half-megabyte memory which can read/write at 5 MB/sec over SPI using
            a 40 MHz SPI clock.”
            For writing and reading out of FRAM, we used fOpen(char* fileName) to create a file in FRAM, then
            fWrite(open_block_index, input_pointer, num_bytes) to write the data in the buffer to the file, and
            fClose(open_block_index) to close the file. For reading the file out of FRAM when the user want to play the
            saved audio, fRead(open_block_index, output_pointer, num_bytes) is used.</p>
          <figure style="width: 500px" class="align-center">
            <img src="./Hardware_files/image14.png" alt="">
          </figure>



        </div>
      </div>
    </article>
  </main>


  <footer id="footer" class="site-footer">
    <!-- start custom footer snippets -->

    <!-- end custom footer snippets -->
    <div class="copyright">

      <p>© 2023 ECE 4760 Final Project. Powered by <a href="https://jekyllrb.com/" rel="nofollow">Jekyll</a> &amp; <a
          href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>

    </div>
  </footer>

  <script src="./Hardware_files/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="./Hardware_files/main.min.js"></script>
  <script src="./Hardware_files/all.js"></script>





</body><grammarly-desktop-integration data-grammarly-shadow-root="true"><template shadowrootmode="open">
    <style>
      div.grammarly-desktop-integration {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      div.grammarly-desktop-integration:before {
        content: attr(data-content);
      }
    </style>
    <div aria-label="grammarly-integration" role="group" tabindex="-1" class="grammarly-desktop-integration"
      data-content="{&quot;mode&quot;:&quot;full&quot;,&quot;isActive&quot;:true,&quot;isUserDisabled&quot;:false}">
    </div>
  </template></grammarly-desktop-integration>

</html>